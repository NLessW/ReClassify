{% extends "base.html" %}
{% block content %}
<div class="mt-3 ml-28">
    

<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>

<div class="flex justify-center items-center h-screen">
	<!--actual component start-->
	<div x-data="setup()" class="h-screen">
		<ul class="flex justify-center items-center my-4">
			<template x-for="(tab, index) in tabs" :key="index">
				<li class="cursor-pointer py-2 px-4 text-gray-500 border-b-8"
					:class="activeTab===index ? 'text-green-500 border-green-500' : ''" @click="activeTab = index"
					x-text="tab"></li>
			</template>
		</ul>

		<div class="w-80 bg-white p-16 text-center mx-auto border w-screen h-5/6">
			<div x-show="activeTab===0">
                <div class="align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-8 pt-3 rounded-bl-lg rounded-br-lg">
                    <table id="example" class="display min-w-full" style="width:100%">
                        <thead>
                            <tr>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left leading-4 text-blue-500 tracking-wider">User Name</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Email</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Role</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider"># Container</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Active date</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Info</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- [{'userName': 'ekstrah', 'email': 'dongho@ekstrah.com', 'role': 5, 'num_cont': -1}] -->
                            {% for user in allAccount %}
                            <tr>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['userName']}}</td>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['email']}}</td>
                                {% if user['role'] == 5 %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-pink-400 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Admin</span>
                                </span></td>
                                {% elif user['role'] == 3 %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-purple-200 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Preimium</span>
                                </span></td>
                                {% elif user['role'] == 1 %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-green-300 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Free</span>
                                </span></td>
                                {% else %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-yellow-300 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Deactivated</span>
                                </span></td>
                                {% endif %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['num_cont']}}</td>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['time-created']}}</td>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">
                                    <button class="p-2 pl-5 pr-5 bg-transparent border-2 border-green-500 text-green-500 text-sm rounded-lg hover:bg-green-500 hover:text-gray-100 focus:border-4 focus:border-green-300" onclick="window.location.href='{{ url_for('complex_view',userName=user['userName'])}}';">Edit</button>
                                </td>
                            </tr>

                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div x-show="activeTab===1">
                <div class="align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-8 pt-3 rounded-bl-lg rounded-br-lg">
                    <table id="example2" class="display min-w-full" style="width:100%">
                        <thead>
                            <tr>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left leading-4 text-blue-500 tracking-wider">User Name</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Email</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Role</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider"># Container</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Active date</th>
                                <th class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider">Info</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- [{'userName': 'ekstrah', 'email': 'dongho@ekstrah.com', 'role': 5, 'num_cont': -1}] -->
                            {% for user in allAccount %}
                            {% if user['role'] == 0 %}
                            <tr>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['userName']}}</td>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['email']}}</td>
                                {% if user['role'] == 5 %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-pink-400 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Admin</span>
                                </span></td>
                                {% elif user['role'] == 3 %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-purple-200 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Preimium</span>
                                </span></td>
                                {% elif user['role'] == 1 %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-green-300 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Free</span>
                                </span></td>
                                {% else %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">                                        <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span aria-hidden class="absolute inset-0 bg-yellow-300 opacity-50 rounded-full"></span>
                                    <span class="relative text-xs">Deactivated</span>
                                </span></td>
                                {% endif %}
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['num_cont']}}</td>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">{{user['time-created']}}</td>
                                <td class="px-6 py-4 whitespace-no-wrap border-b text-blue-500 border-gray-500 text-base leading-5">
                                    <button class="p-2 pl-5 pr-5 bg-transparent border-2 border-green-500 text-green-500 text-sm rounded-lg hover:bg-green-500 hover:text-gray-100 focus:border-4 focus:border-green-300" onclick="window.location.href='{{ url_for('complex_view',userName=user['userName'])}}';">Edit</button>
                                </td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
		</div>

		
	</div>
	<!--actual component end-->
</div>
<script>
function modify_user(userName){
    location.href = "/viewAC/"+userName;
}
function activate_user(userName) {
    var xhr = new XMLHttpRequest(); 
    var url = "http://localhost:5500/activate";
    xhr.open("POST", url, true);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.onreadystatechange = function() {
        if (xhr.readyState ===4 && xhr.status === 200) {
            var json = JSON.parse(xhr.responseText);
            console.log(json)
        }
    };
    const parse_data = {
        "userName" : userName
    }
    var data = JSON.stringify(parse_data);
    xhr.send(data);
    location.reload();
}
</script>
<script>
	function setup() {
    return {
      activeTab: 0,
      tabs: [
          "All User",
          "Unverified User",
      ]
    };
  };
</script>
<script>
    $(document).ready(function() {
    $('#example').DataTable();
} );
$(document).ready(function() {
    $('#example2').DataTable();
} );
</script>
</div>

{% endblock %}